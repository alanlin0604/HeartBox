# HeartBox 全面檢查報告

> 產出日期：2026-02-19

---

## 1. 目前功能是否需要修改或新增

### 現有功能清單（已完成）

- 20 個前端頁面、23 個組件、60+ API 端點、17 個資料庫 Model、3 語系支援
- 完整功能列表見附錄 A

### 建議修正的問題

| 項目 | 說明 |
|------|------|
| NoteDetailPage 編輯模式 | 編輯用 textarea 而非 Tiptap，富文字格式會遺失 |
| 諮商師功能缺使用情境 | 目前沒有真實諮商師，功能存在但無法體驗 |
| 心理教育文章僅 8 篇 | 內容量偏少，且為 seed data |
| Daily Prompt 需要 OpenAI Key | 如果 key 無效會 fallback 到靜態提示 |

### 建議新增的高價值功能（依優先級）

| 優先級 | 功能 | 原因 |
|--------|------|------|
| **高** | 引導式呼吸/冥想 | 市面上 Moodfit、Sanvello、Youper 都有，用戶期望值高 |
| **高** | 感恩日記模式 | 正向心理學核心功能，可做成預設模板 |
| **中** | Apple Health / Google Fit 整合 | 自動匯入睡眠、心率、步數，Bearable 的核心賣點 |
| **中** | 結構化課程（多步驟學習） | 把現有心理教育文章升級為系列課程 |
| **低** | 用藥追蹤 | 對看診用戶有用，Bearable 和 Moodfit 有 |
| **低** | 社群/同儕支持 | Sanvello 的特色，但需要大量人力管理 |

---

## 2. 如何讓別人使用你的網站

### 目前的存取方式

- 前端網址：`https://heartbox.alan930604.workers.dev`
- 後端 API：`https://heartbox-api-598139488748.asia-east1.run.app`
- 這是 Cloudflare Workers 的子域名，不夠專業

### 建議的推廣方式

| 方式 | 說明 | 成本 |
|------|------|------|
| **買自訂域名** | 如 `heartbox.app` 或 `heartbox.tw`，綁定到 Cloudflare Workers | ~$10-15/年 |
| **Google 搜尋收錄** | 提交 sitemap 到 Google Search Console，SEO meta 已有設定 | 免費 |
| **PWA 安裝** | 網站已支援 PWA，用戶可「加到主畫面」像 App 一樣使用 | 免費 |
| **社群推廣** | PTT、Dcard、Reddit 心理健康板分享 | 免費 |
| **App Store 上架** | 用 TWA (Trusted Web Activity) 包裝成 Android App 上架 Google Play | $25 一次性 |

### 最重要的一步

買一個好記的域名（如 `heartbox.app`），然後在 Cloudflare 設定 Custom Domain。步驟：

1. 在域名註冊商（如 Namecheap、GoDaddy、Google Domains）購買域名
2. 將域名的 NS (Name Server) 指向 Cloudflare
3. 在 Cloudflare Dashboard → Workers → heartbox → Settings → Custom Domains 新增域名
4. 等待 DNS 生效（通常 5-30 分鐘）

---

## 3. 與市面上產品的比較

### 競品概覽

| 競品 | 定位 | 定價 | 用戶量 |
|------|------|------|--------|
| **Daylio** | 最熱門的微型日記追蹤器，一鍵記錄心情 | $36/年 | 千萬級 |
| **Moodfit** | CBT 工具 + 冥想 + 呼吸練習 | $40/年 | 百萬級 |
| **Bearable** | 最精細的健康追蹤，適合慢性病患者 | $35/年 | 百萬級 |
| **Youper** | AI 聊天為核心，史丹佛臨床驗證 | $70/年 | 百萬級 |
| **MindDoc** | 結構化臨床評估 + 課程學習 | $70/年 | 三百萬+ |
| **Sanvello** | 四大支柱：自助、社群、教練、治療 | $54/年 | 數百萬 |
| **Woebot** | AI CBT 聊天機器人（2025/6 已關閉） | 免費 | 150 萬 |

### 功能對照表

| 功能 | HeartBox | Daylio | Bearable | Youper | Moodfit | MindDoc | Sanvello |
|------|----------|--------|----------|--------|---------|---------|----------|
| AI 情緒分析 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| AI 回饋建議 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| AI 聊天機器人 | ✅ | ❌ | ❌ | ✅ | ❌ | ❌ | ❌ |
| AI 每日提示 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| AI 週報摘要 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 富文字編輯器 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 語音轉文字 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 日記加密 | ✅ Fernet AES | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| PHQ-9/GAD-7 | ✅ | ❌ | ❌ | ✅ | ✅ | ✅ 自有 | ❌ |
| 諮商師市集 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 即時通訊 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | 教練聊天 |
| 預約系統 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | 保險轉介 |
| 治療師報告 | ✅ 公開連結+到期 | ❌ | CSV | 一鍵匯出 | ❌ | 摘要 | ❌ |
| 年度像素圖 | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 心情日曆 | ✅ | ✅ | 週視圖 | ✅ | ❌ | ❌ | ❌ |
| 壓力雷達圖 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 天氣關聯分析 | ✅ | ❌ | ✅ | ❌ | ❌ | ❌ | ❌ |
| 活動-心情關聯 | ✅ | ❌ | ✅ | ❌ | ❌ | ❌ | ❌ |
| 睡眠-心情關聯 | ✅ | ❌ | ✅ | ❌ | ❌ | ❌ | ❌ |
| 成就系統 | ✅ 30 個 | ✅ | ❌ | ❌ | 有限 | ❌ | 有限 |
| 資料匯出 | ✅ JSON/CSV/PDF | CSV/PDF | CSV 有限 | ❌ | ❌ | ❌ | ❌ |
| 多語系 | ✅ 中英日 | ✅ 多語 | ❌ 英文 | ❌ 英文 | ❌ 英文 | 有限 | ❌ 英文 |
| 深色/淺色主題 | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 字體大小調整 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 連續天數追蹤 | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 筆記分享 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 軟刪除/垃圾桶 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 釘選/批次刪除 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 稽核日誌 | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| 搜尋與篩選 | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ |
| 自訂模板 | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |
| PWA 離線支援 | ✅ | 原生 App | 原生 App | 原生 App | 原生 App | 原生 App | 原生+Web |
| 呼吸/冥想練習 | ❌ | ❌ | ❌ | ✅ | ✅ | ❌ | ✅ |
| 穿戴裝置整合 | ❌ | ❌ | ✅ | ❌ | ❌ | ❌ | ❌ |
| 社群/同儕支持 | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |
| 用藥追蹤 | ❌ | ❌ | ✅ | ❌ | ✅ | ❌ | ❌ |
| 感恩日記 | ❌ | ❌ | ❌ | ❌ | ✅ | ❌ | ❌ |

### HeartBox 獨有功能（無競品具備）

1. **AI 情緒分析 + 壓力指數雙重評分** — 每篇日記自動 NLP 分析
2. **每篇日記的 AI 回饋建議** — 寫完即時獲得 AI 建議
3. **AI 週報摘要** — 自動生成每週心情趨勢與建議
4. **治療師可分享報告（公開連結+到期設定）** — 獨特的專業分享機制
5. **內建諮商師市集 + 預約 + 即時通訊** — 自助到專業的完整橋接
6. **Fernet AES 加密日記內容** — 欄位級加密，隱私最高標準
7. **雙層 AI 引擎（RAG 負面情緒 / 基礎正面情緒）** — 智慧分流架構
8. **富文字編輯器（Tiptap）** — 唯一支援格式化日記的產品
9. **語音轉文字輸入** — 真正的語音轉文字，非錄音檔

### HeartBox 缺少的功能（競品有）

| 缺少功能 | 哪些競品有 | 重要性 |
|----------|-----------|--------|
| 引導式冥想與呼吸練習 | Moodfit、Sanvello、Youper | ⭐⭐⭐ 高 |
| 感恩日記 | Moodfit | ⭐⭐ 中 |
| Apple Health / Google Fit 整合 | Bearable | ⭐⭐ 中 |
| 結構化課程（系列學習模組） | MindDoc、Sanvello | ⭐⭐ 中 |
| 用藥追蹤 | Bearable、Moodfit | ⭐ 低 |
| 同儕社群支持 | Sanvello | ⭐ 低 |
| 多種治療模式（ACT、DBT、PST） | Youper | ⭐ 低 |
| 慢性病/身體症狀追蹤 | Bearable | ⭐ 低 |

### 整體定位

> **HeartBox = AI 驅動 + 隱私加密 + 專業諮商整合的全方位心理健康平台**

HeartBox 在市場上佔據獨特位置，同時結合三大能力：

1. **深度 AI 整合**：唯一將 AI 貫穿整個體驗的產品（情緒分析、回饋、聊天、週報、每日提示、RAG）
2. **真正的資料隱私**：Fernet 欄位級加密，在心理健康 App 資料隱私問題日益受關注的時代是重要賣點
3. **專業服務整合**：諮商師市集 + 預約 + 即時通訊 + 可分享報告，串接自助與專業照護

以功能豐富度來說，HeartBox 已可定位為 **$40-70/年** 的付費產品。

### 注意事項

- **Woebot 已於 2025 年 6 月關閉**，其 AI CBT 聊天機器人的市場空缺可由 HeartBox 填補
- Daylio 是最大競爭者（千萬用戶），但定位為簡易微型日記，HeartBox 應定位為進階版
- Youper 是最接近的 AI 競品，但缺乏日記深度和專業服務層，且年費 $70 無免費版

---

## 附錄 A：完整功能清單

### 前端頁面（20 頁）

**認證與帳號**
- LoginPage — 登入
- RegisterPage — 註冊
- ForgotPasswordPage — 忘記密碼
- ResetPasswordPage — 重設密碼

**核心日記**
- JournalPage — 日記撰寫與列表
- NoteDetailPage — 日記詳情（含 AI 回饋、附件、分享）
- DashboardPage — 數據儀表板（心情趨勢、天氣關聯、標籤頻率、活動關聯、睡眠關聯、壓力雷達、年度像素、心情日曆）

**心理健康**
- AssessmentsPage — PHQ-9 / GAD-7 自評量表
- WeeklySummaryPage — 每週 AI 摘要報告
- AchievementsPage — 成就徽章（30 個）
- PsychoContentPage — 心理教育文章

**諮商師功能**
- CounselorListPage — 諮商師列表與申請
- ChatPage — 即時通訊
- AIChatPage — AI 聊天機器人

**管理後台**
- AdminPage — 系統統計、用戶管理、諮商師審核、回饋管理

**設定與法律**
- SettingsPage — 個人資料、安全、偏好、資料管理
- PrivacyPage — 隱私政策
- TermsPage — 服務條款
- NotFoundPage — 404 頁面

### 後端 API 端點（60+）

- 認證：8 個（註冊、登入、刷新、個人檔案、密碼重設、登出其他裝置、刪除帳號、匯出）
- 日記 CRUD：11 個（列表、建立、詳情、更新、刪除、釘選、重新分析、批次刪除、垃圾桶、還原、永久刪除）
- 分析：3 個（趨勢、日曆、年度像素）
- 成就：2 個
- 警示：1 個
- 匯出：3 個（PDF、JSON、CSV）
- 諮商師：4 個
- 通訊：4 個
- 管理：6 個
- 通知：2 個
- 附件：1 個
- 預約：5 個
- 分享：2 個
- 回饋：1 個
- AI 聊天：6 個
- 健康功能：5 個（每日提示、自評量表、週報）
- 治療師報告：3 個
- 心理教育：1 個

### 技術架構

| 層級 | 技術 |
|------|------|
| 前端 | Vite + React、Tailwind CSS v4、Recharts、Tiptap、DOMPurify |
| 後端 | Django 5.2、DRF、SimpleJWT、Daphne ASGI |
| 資料庫 | Neon PostgreSQL (ap-southeast-1)、SQLite (測試) |
| AI | OpenAI GPT-4o-mini、LangChain 0.3.x、ChromaDB 1.0.x、Jieba |
| 加密 | Fernet (AES-CBC + HMAC-SHA256) |
| 部署 | Google Cloud Run (asia-east1)、Cloudflare Workers |
| PWA | Service Worker、離線支援、推播通知 |
| SEO | Open Graph、Twitter Card、Meta Description |

### 測試

- 後端：113 個測試全部通過
- 測試環境：SQLite（避免 Neon 測試資料庫問題）
- 涵蓋範圍：認證安全、日記 CRUD、帳號管理、批次操作、CSV 匯出、分析、管理、密碼變更、節流、AI 聊天、成就、預約、通訊、分享、軟刪除、稽核日誌
